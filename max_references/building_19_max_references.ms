plugin simpleObject building_19
name:"building_19"
classID:#(0x2dfc3800, 0x5cc4e57e)
category:"max_references"
(
	local theTriMesh = triMesh()
	local originalSize = 7.80642
	function buildTriMesh =
	(
		v_arr =  #([-10.441,-21.9865,-0.0201661], [-10.441,-27.99,-0.0201661], [-10.441,-21.9865,5.98335], [-10.441,-27.99,5.98335], [-4.43747,-21.9865,-0.0201661], [-4.43747,-27.99,-0.0201661], [-4.43747,-21.9865,5.98335], [-4.43747,-27.99,5.98335], [-9.84663,-22.5809,7.78626], [-9.84663,-27.3957,7.78626], [-5.03181,-27.3957,7.78626], [-5.03181,-22.5809,7.78626], [-8.81603,-21.9865,-0.0201661], [-6.06242,-21.9865,-0.0201661], [-8.43981,-27.99,-0.0201661], [-6.43864,-27.99,-0.0201661], [-8.43981,-21.9865,5.98335], [-6.43864,-21.9865,5.98335], [-8.43981,-27.99,5.98335], [-6.43864,-27.99,5.98335], [-6.63676,-27.3957,7.78626], [-8.24169,-27.3957,7.78626], [-8.24169,-22.5809,7.78626], [-6.63676,-22.5809,7.78626], [-6.06242,-21.9865,4.225], [-8.81603,-21.9865,4.225], [-4.43747,-21.9865,4.225], [-10.441,-21.9865,4.225], [-8.62792,-20.5233,4.24366], [-6.25053,-20.5233,4.24366], [-8.62884,-21.9865,4.82263], [-8.627,-21.9865,5.10846], [-6.24961,-21.9865,4.82263], [-6.25144,-21.9865,5.10846], [-8.68385,-21.9865,4.09283], [-6.19459,-21.9865,4.09283], [-6.19459,-21.9865,0.112007], [-8.68385,-21.9865,0.112007], [-8.68385,-22.09,4.09283], [-6.19459,-22.09,4.09283], [-6.19459,-22.09,0.112007], [-8.68385,-22.09,0.112007])
		f_arr =  #([13,15,2], [2,1,13], [2,4,3], [2,3,28], [2,28,1], [15,19,4], [4,2,15], [9,23,17], [17,3,9], [10,9,3], [3,4,10], [14,25,27], [27,5,14], [27,7,8], [5,27,8], [5,8,6], [6,16,14], [14,5,6], [12,11,8], [8,7,12], [18,24,12], [12,7,18], [7,27,25], [25,33,34], [7,25,34], [7,34,18], [20,16,6], [6,8,20], [22,23,9], [9,10,22], [12,24,21], [21,11,12], [38,37,14], [14,13,38], [16,15,13], [13,14,16], [37,36,25], [25,14,37], [20,19,15], [15,16,20], [23,24,18], [18,17,23], [32,31,26], [32,26,28], [17,32,28], [17,28,3], [34,32,17], [17,18,34], [19,22,10], [10,4,19], [21,22,19], [19,20,21], [20,8,11], [11,21,20], [24,23,22], [22,21,24], [26,31,33], [33,25,26], [36,35,26], [26,25,36], [35,38,13], [13,26,35], [26,13,1], [1,28,26], [29,31,32], [33,31,29], [29,30,33], [34,30,29], [29,32,34], [34,33,30], [39,42,38], [38,35,39], [40,39,35], [35,36,40], [41,40,36], [36,37,41], [42,41,37], [37,38,42], [41,42,39], [39,40,41])
		setMesh theTriMesh verts:v_arr faces:f_arr
		theEdgeVis = #(#(1, #{3}), #(2, #{3}), #(3, #{3}), #(4, #{1, 3}), #(5, #{1}), #(6, #{3}), #(7, #{3}), #(8, #{3}), #(9, #{3}), #(10, #{3}), #(11, #{3}), #(12, #{3}), #(13, #{3}), #(14, #{3}), #(15, #{2..3}), #(16, #{1}), #(17, #{3}), #(18, #{3}), #(19, #{3}), #(20, #{3}), #(21, #{3}), #(22, #{3}), #(23, #{3}), #(24, #{3}), #(25, #{1..3}), #(26, #{1}), #(27, #{3}), #(28, #{3}), #(29, #{3}), #(30, #{3}), #(31, #{3}), #(32, #{3}), #(33, #{3}), #(34, #{3}), #(35, #{3}), #(36, #{3}), #(37, #{3}), #(38, #{3}), #(39, #{3}), #(40, #{3}), #(41, #{3}), #(42, #{3}), #(43, #{3}), #(44, #{1, 3}), #(45, #{2..3}), #(46, #{1}), #(47, #{3}), #(48, #{3}), #(49, #{3}), #(50, #{3}), #(51, #{3}), #(52, #{3}), #(53, #{3}), #(54, #{3}), #(55, #{3}), #(56, #{3}), #(57, #{3}), #(58, #{3}), #(59, #{3}), #(60, #{3}), #(61, #{3}), #(62, #{3}), #(63, #{3}), #(64, #{3}), #(66, #{3}), #(67, #{3}), #(68, #{3}), #(69, #{3}), #(71, #{3}), #(72, #{3}), #(73, #{3}), #(74, #{3}), #(75, #{3}), #(76, #{3}), #(77, #{3}), #(78, #{3}), #(79, #{3}), #(80, #{3}))
		theSmoothGroups = #(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
		theMatIDs = #(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
		theNumMaps = 2
		theMapSupport = #(false, true)
		theNumMapVerts = #(undefined, 95)
		theNumMapFaces = #(undefined, 80)
		theMapVerts = #()
		theMapFaces = #()
		theMapVerts[1] = undefined
		theMapFaces[1] = undefined
		theMapVerts[2] = #([0,0,0], [0,0.398648,0], [0,0.703597,0], [0,0.797296,0], [0,1,0], [0,0.304949,0], [0.0302643,0.797296,0], [0.0302643,0.398648,0], [0.1019,0.398648,0], [0.1019,0.703597,0], [0.111988,0.797296,0], [0.126754,0.797296,0], [0.126754,1,0], [0.193712,0.797296,0], [0.2038,0.398648,0], [0.2038,0.703597,0], [0.275436,0.797296,0], [0.275436,0.398648,0], [0.3057,0,0], [0.3057,0.215634,0], [0.3057,0.304949,0], [0.3057,0.398648,0], [0.3057,0.398648,0], [0.3057,0.643819,0], [0.3057,0.64909,0], [0.3057,0.654361,0], [0.3057,0.654361,0], [0.3057,0.703597,0], [0.3057,0,0], [0.3057,0.215634,0], [0.305747,0.734492,0], [0.335964,0.398648,0], [0.387424,0.398648,0], [0.387424,0.643819,0], [0.426804,0.734492,0], [0.426851,0.654361,0], [0.432454,0.643819,0], [0.432454,0.643819,0], [0.432454,0.64909,0], [0.432454,0.654361,0], [0.432454,0.717335,0], [0.432454,0.73189,0], [0.469148,0.398648,0], [0.469148,0.643819,0], [0.506965,0.6733,0], [0.506965,0.687854,0], [0.506965,0.687854,0], [0.550871,0.398648,0], [0.550871,0.601352,0], [0.550871,0.643819,0], [0.556142,0.398648,0], [0.556142,0.601352,0], [0.556142,0.398648,0], [0.556142,0.601352,0], [0.561413,0.398648,0], [0.561413,0.601352,0], [0.581136,0.398648,0], [0.6114,0.304433,0], [0.6114,0,0], [0.6114,0,0], [0.6114,0.215269,0], [0.6114,0.304949,0], [0.6114,0.39861,0], [0.6114,0.70431,0], [0.6114,0.79086,0], [0.611447,0.70431,0], [0.641664,0.39861,0], [0.694143,0,0], [0.694143,0.215269,0], [0.694143,0.70431,0], [0.700873,0.208567,0], [0.700873,0.0067024,0], [0.703675,0.245574,0], [0.703768,0.260069,0], [0.7133,0.304433,0], [0.7133,0.39861,0], [0.723388,0.39861,0], [0.73241,0.70431,0], [0.732457,0.79086,0], [0.805112,0.39861,0], [0.8152,0.304433,0], [0.8152,0.39861,0], [0.824732,0.260069,0], [0.824825,0.245574,0], [0.827627,0.0067024,0], [0.827627,0.208567,0], [0.834357,0.215269,0], [0.834357,0,0], [0.834357,0.70431,0], [0.886836,0.39861,0], [0.9171,0,0], [0.9171,0.215269,0], [0.9171,0.304433,0], [0.9171,0.39861,0], [0.9171,0.70431,0])
		theMapFaces[2] = #([89,82,94], [94,95,89], [60,62,21], [60,21,30], [60,30,29], [9,10,3], [3,2,9], [90,80,81], [81,93,90], [57,32,21], [21,62,57], [68,69,61], [61,59,68], [20,21,6], [19,20,6], [19,6,1], [63,76,70], [70,64,63], [18,8,6], [6,21,18], [75,77,67], [67,58,75], [58,61,69], [69,73,74], [58,69,74], [58,74,75], [16,15,23], [23,28,16], [33,34,24], [24,22,33], [50,44,43], [43,48,50], [85,72,68], [68,88,85], [76,82,89], [89,70,76], [72,71,69], [69,68,72], [16,10,9], [9,15,16], [80,77,75], [75,81,80], [83,84,87], [83,87,92], [81,83,92], [81,92,93], [74,83,81], [81,75,74], [10,11,7], [7,3,10], [14,11,10], [10,16,14], [16,28,17], [17,14,16], [44,34,33], [33,43,44], [87,84,73], [73,69,87], [71,86,87], [87,69,71], [86,85,88], [88,87,86], [87,88,91], [91,92,87], [37,45,47], [26,36,35], [35,31,26], [78,79,65], [65,66,78], [42,41,46], [52,51,55], [55,56,52], [25,39,40], [40,27,25], [53,54,49], [49,48,53], [24,38,39], [39,25,24], [4,12,13], [13,5,4])
		for f in theEdgeVis do for i in f[2] do
			setEdgeVis theTriMesh f[1] i false
		for f = 1 to getNumFaces theTriMesh do
		(
			setFaceSmoothGroup theTriMesh f theSmoothGroups[f]
			setFaceMatID theTriMesh f theMatIDs[f]
		)
		meshOp.setNumMaps theTriMesh theNumMaps keep:false
		for n = 1 to theNumMaps do
		(
			local supp = theMapSupport[n]
			meshOp.setMapSupport theTriMesh (n - 1) supp
			if supp do
			(
				local numMV = theNumMapVerts[n]
				local numMF = theNumMapFaces[n]
				meshOp.setNumMapVerts theTriMesh (n - 1) numMV
				meshOp.setNumMapFaces theTriMesh (n - 1) numMF
				for v = 1 to numMV do
					meshOp.setMapVert theTriMesh (n - 1) v theMapVerts[n][v]
				for f = 1 to numMF do
					meshOp.setMapFace theTriMesh (n - 1) f theMapFaces[n][f]
			)
		)
	)
	parameters main rollout:params
	(
		size type:#worldUnits ui:size default:7.80642
	)
	rollout params "Parameters"
	(
		fn showLocation =
		(
			rollout rltLoc ""
			(
				local theLoc = getSourceFileName()
				local w = (getTextExtent theLoc).x + 26
				button done "" align:#left offset:[-8,0]
				on rltLoc open do
				(
					rltLoc.width = w
					done.caption = theLoc
				)
				on done pressed do destroyDialog rltLoc
			)
			createDialog rltLoc modal:true style:#(#style_border)
		)
		spinner size "Size:" type:#worldUnits range:[0,10000,0] align:#center
		button orSz "Original Size" width:94
		button shLoc "Show Location" toolTip:"plugin's file"width:94
		on orSz pressed do size.value = originalSize
		on shLoc pressed do showLocation()
	)
	on create do buildTriMesh()
	on load do buildTriMesh()
	on clone orig do buildTriMesh()
	on buildMesh do
	(
		theMesh = copy theTriMesh
		local theScale = size / originalSize
		scale theMesh [theScale, theScale, theScale]
		setMesh mesh theMesh
	)
	tool create
	(
		on mousePoint click do
		case click of
		(
			1: (size = 0; coordSys grid (nodeTM.translation = gridPoint))
			2: #stop
		)
		on mouseMove click do
		case click of
		(
			2: size = 2 * length gridDist
		)
	)
)
